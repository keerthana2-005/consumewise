{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="{% static 'modelapp/home.css'%}" >
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;500&display=swap" rel="stylesheet">
    <link href='https://unpkg.com/boxicons@2.1.1/css/boxicons.min.css' rel='stylesheet'> 
    
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Fredoka:wght@300..700&display=swap');
    </style>  
        
</head>
<body>
       <!-- Nav Bar -->
    <nav>
        <div class="logo">
            <img src="{% static 'modelapp/logo.png'%}" alt="Logo">
            <span class="logo-name">ConsumeWise</span>
        </div>
        <div class="nav-links">
            <a href="#home-section">Home</a>
            <a href="#chat-section">Chat</a>
            <a href="#about-section">About</a>
            <a href="#contact-section">Contact</a>
        </div>  
        <div class="spacer"></div>
        <div class="dropdown">
            <button class="dropbtn"><i class='bx bx-user-circle'></i></button>
            <div class="dropdown-content">
                <a href="{% url 'profile'%}">Profile</a>
                <form action="{% url 'logout' %}" method="post" style="display: inline;">
                    {% csrf_token %}
                    <button class="btn" type="submit">Logout</button>
                </form>
                
            </div>
        </div>
        <!-- Login Modal -->
        <div id="loginModal" class="modal">
            <div class="modal-content">
                <span class="close" onclick="closeModal('loginModal')">&times;</span>
                <h2>Login</h2>
                <form id="loginForm">
                    <label for="username">Username:</label>
                    <input type="text" id="username" name="username" required>
                    <label for="password">Password:</label>
                    <input type="password" id="password" name="password" required>
                    <button type="submit">Login</button>
                </form>
                <div class="options">
                    <p>New User? <a href="#" onclick="showSignup()">Sign Up</a></p>
                </div>
            </div>
        </div>

        <!-- Signup Modal -->
        <div id="signupModal" class="modal">
            <div class="modal-content">
                <span class="close" onclick="closeModal('signupModal')">&times;</span>
                <h2>Sign Up</h2>
                <form id="signupForm">
                    <label for="newUsername">Username:</label>
                    <input type="text" id="newUsername" name="newUsername" required>
                    <label for="email">Email:</label>
                    <input type="email" id="email" name="email" required>
                    <label for="newPassword">Password:</label>
                    <input type="password" id="newPassword" name="newPassword" required>
                    <label for="confirmPassword">Confirm Password:</label>
                    <input type="password" id="confirmPassword" name="confirmPassword" required>
                    <button type="submit">Sign Up</button>
                </form>
                <div class="options">
                    <p>Already have an account? <a href="#" onclick="showLogin()">Login</a></p>
                </div>
            </div>
        </div>
    </nav>    
    <div class="spacer"></div>
                                     <!--Home section-->   
    <section id="home-section">
        <div class="content">
            <div class="text-content">
                <h1>Welcome to ConsumeWise !!</h1>
                <p>Not sure of which is healthy and worthy?<br> No worries, We got you covered :)<br><BR><h2>"YOUR HEALTH OUR WAY"</h2></p>
                <div class="cta-section">
                    <p class="cta-text">Ready to try?</p>
                    <a href="#chat-section" class="cta-button">Get Started</a>
                </div>
            </div>
            <img src="{% static 'modelapp/image1.jpg'%}" alt="Description" class="home-image">
        </div>
    </section>
                                         <!--Chat section-->  
    <section id="chat-section">
        <img src="{% static 'modelapp/chatbot.jpg'%}">
        <div class="container">
            <form id="formId" enctype="multipart/form-data" method="post">
                {% csrf_token %}
            <div class="input-area">
                <i class="fas fa-paperclip attachment-icon"></i>
                <input type="file" id="fileInput" accept="image/*" style="display:none;">
                <textarea id="textInput" name="textInput" placeholder="Please type the product name accurately..." class="text-input"></textarea>
                <button type="submit"><i class='bx bx-send upload-icon'></i></button>
            </div>
            </form>
            <div id="outputArea" class="output-area">
                <b>{{product_name}}</b>
                <br>
                {{nutritional_info}}
                <br>
                {{response_text_formatted|safe}}
            </div> 
            <button id="clearButton" class="clear-btn" style="display:none;">Clear</button> <!-- Clear button -->
        </div>
    </section>
                                        <!-- About section -->        
    <section id="about-section">
        <h2 style="font-weight: bolder;text-align: left;">Why ConsumeWise?</h2><br>
        <img src="{% static 'modelapp/logo.png'%}" class="square-image">
        <div class="about-section">
            <div class="about-item">
                <img src="{% static 'modelapp/image7.avif'%}" alt="Health Impact">
                <p><b>Health Impact</b><br>
                    Verifiable info on ingredients and their effects on health
                </p>
            </div>
            <div class="about-item">
                <img src="{% static 'modelapp/image3.jpg' %}" alt="Health Impact">
                <p><strong>Cost-Sensitivity</strong><br> Balance affordability and health-conscious consumption for users.</p>
            </div>
            <div class="about-item">
                <img src="{% static 'modelapp/image5.jpg'%}" alt="Sustainability">
                <p><strong>Sustainability</strong><br> Highlights eco-friendly products, making the nature safe.</p>
            </div>
            <div class="about-item">
                <img src="{% static 'modelapp/image4.jpg'%}" alt="Convenience">
                <p><strong>Convenience</strong><br> Tailored insights are provided at the right moment in a shopper's journey.</p>
            </div>
        </div>  
    </section>
                                        <!--Contact Section -->
    <section id="contact-section">
        <footer class="footer">
            <div class="contact-container">
                <div class="footer-sections">
                    <div class="contact-details">
                        <h3>Contact Us</h3>
                        <p><i class="fas fa-phone"></i> Phone:987XXXXXXX</p>
                        <p><i class="fas fa-envelope"></i> Email: info@example.com</p>
                        <p><i class="fas fa-map-marker-alt"></i> Adress</p>
                    </div>
                    <div class="social-media">
                        <h3>Follow Us</h3>
                        <a href="#" class="social-icon"><i class="fab fa-facebook-f"></i></a>
                        <a href="#" class="social-icon"><i class="fab fa-twitter"></i></a>
                        <a href="#" class="social-icon"><i class="fab fa-instagram"></i></a>
                        <a href="#" class="social-icon"><i class="fab fa-linkedin"></i></a>
                    </div>
                </div>
                <hr>
                <div class="footer-bottom">
                    <p>&copy; 2024 CompanyName. All rights reserved.</p>
                </div>
            </div>
        </footer>
    </section>
                                        <!-- JS code -->
    <script>
        // Trigger the file input dialog when the attachment icon is clicked
document.querySelector('.attachment-icon').addEventListener('click', () => {
    document.getElementById('fileInput').click(); // Open the file input dialog
});

// Function to handle form submission
function submitForm() {
    const inputText = document.getElementById('textInput').value;
    const fileInput = document.getElementById('fileInput').files[0];

    // Check if text input or file input is present
    if (!inputText && !fileInput) {
        alert("Please enter text or upload a file.");
        return; // Prevent form submission if nothing is entered
    }

    const form = document.getElementById('formId'); // Make sure your form has an id (e.g., formId)
    form.submit(); // Programmatically submit the form
}

// Trigger form submission on clicking the upload icon
document.querySelector('.upload-icon').addEventListener('click', (event) => {
    event.preventDefault(); // Prevent default form submission for now
    submitForm(); // Trigger form submission via JavaScript
});

// Add event listener for Enter key press to submit the form
document.getElementById('textInput').addEventListener('keypress', function (event) {
    if (event.key === 'Enter') {
        event.preventDefault(); // Prevent default form submission
        submitForm(); // Trigger form submission via JavaScript
    }
});

// Open the modal when required
function openModal(modalId) {
    document.getElementById(modalId).style.display = "flex"; // Show the modal
}

// Close the modal when required
function closeModal(modalId) {
    document.getElementById(modalId).style.display = "none"; // Hide the modal
}

// Switch between login and signup modals
function showLogin() {
    closeModal('signupModal');
    openModal('loginModal');
}

function showSignup() {
    closeModal('loginModal');
    openModal('signupModal');
}

// Close the modal if the user clicks outside of it
window.onclick = function(event) {
    const loginModal = document.getElementById('loginModal');
    const signupModal = document.getElementById('signupModal');
    if (event.target === loginModal) {
        closeModal('loginModal');
    }
    if (event.target === signupModal) {
        closeModal('signupModal');
    }
}

// Display text or file output
function displayOutput() {
    const inputText = document.getElementById('textInput').value.trim();
    const fileInput = document.getElementById('fileInput').files[0];
    const outputArea = document.getElementById('outputArea');
    outputArea.innerHTML = '';  // Clear previous output

    if (inputText) {
        const textOutput = document.createElement('div');
        textOutput.textContent = `You entered: ${inputText}`;
        textOutput.className = 'text-output';
        outputArea.appendChild(textOutput);
    }

    if (fileInput) {
        const fileOutput = document.createElement('div');
        fileOutput.textContent = `You uploaded: ${fileInput.name}`;
        fileOutput.className = 'file-output';
        outputArea.appendChild(fileOutput);
    }
}

// Add event listener for the clear button to clear the output
const clearButton = document.getElementById('clearButton');
clearButton.addEventListener('click', function () {
    document.getElementById('outputArea').innerHTML = ''; // Clear output
    document.getElementById('textInput').value = ''; // Clear input as well
    clearButton.style.display = 'none'; // Hide the clear button
});

// Display clear button when output is shown
function showClearButton() {
    clearButton.style.display = 'block'; // Show clear button
}

// Ensure the clear button is hidden on page load
clearButton.style.display = 'none';


    </script>
</body>
</html>